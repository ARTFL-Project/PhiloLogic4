<div id="collocation-container" class="container-fluid" ng-controller="collocationCtrl">    
    <div id="philologic_response" class="panel panel-default">
        <div id="initial_report">
            <div id="description">
                <button type="button" id="export-results" class="btn btn-default btn-xs pull-right" data-toggle="modal" data-target="#export-dialog">
                    Export results
                </button>
                <div id="search_arguments">
                    Displaying the top 100 collocates for {{ ::resultsLength }} occurrences of <b>{{ ::collocationParams.q }}</b><br>
                    Bibliographic criteria:
                    <span class="biblio-criteria" ng-repeat="metadata in biblio" style="margin: 1px">
                        {{ ::metadata.key.charAt(0).toUpperCase() + metadata.key.slice(1) }} : <b>{{ ::metadata.value }}</b>
                        <span class="glyphicon glyphicon-remove-circle" ng-click="removeMetadata(metadata.key, formData)"></span>
                    </span>
                </div>
            </div>
            <div class="progress" class="velocity-opposites-transition-slideDownIn" data-velocity-opts="{ duration: 400 }" style="margin-left: 15px; margin-right: 15px" ng-if="done === false">
                <div class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                </div>
            </div>
            <div style="padding-left: 15px;">
                <span ng-if="collocationParams.collocFilterChoice === 'stopwords'">
                    <span class="filter-list">Common function words</span> are being filtered from this report.
                </span>
                <span ng-if="collocationParams.collocFilterChoice === 'frequency'"">
                    <span class="filter-list">The {{ ::collocationParams.filterFrequency }} most common words</span> are being filtered from this report.
                </span>
                <div class="panel panel-default" id="filter-list" ng-if="collocationParams.filterList">
                    <button type="button" class="close"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <ol>
                        <li ng-repeat="word in collocation.filterList">{{ ::word }}</li>
                    </ol>
                </div>
            </div>
            <div class="bg-danger" style="margin-top: 20px; width: 50%;" ng-if="config.debug">
                {{ ::collocation.error }}
            </div>
        </div>
        <div class="results_container">
            <div id='philologic_collocation' class="row">
                <div class="col-xs-12 col-sm-3 col-sm-push-9 col-md-4 col-md-push-8">
                    <div id="word_cloud" class="word_cloud">
                        <div id="collocate_counts" class="collocation_counts">
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-9 col-sm-pull-3 col-md-8 col-md-pull-4">
                    <div class="table-reponsive">
                        <table class="table table-bordered" id="collocation_table">
                            <tr>
                             <th>within {{ ::collocationParams.wordNum }} words on either side</th>
                             <th>within {{ ::collocationParams.wordNum  }} words to left</th>
                             <th>within {{ ::collocationParams.wordNum  }} words to right</th>
                            </tr>
                            <tr>
                                <td id="all-collocate-column">
                                    <span id="all-num-{{ ::$index}}" class="colloc-row" ng-repeat="result in sortedLists.all">
                                        <span id="all-word-{{ ::$index }}" class="colloc_link" ng-click="something(result.url)">
                                            {{ ::result.label }}
                                        </span>
                                        <span id="all-count-{{ ::$index }}">
                                            &nbsp;({{ ::result.count }})
                                        </span>
                                    </span>
                                </td>
                                <td id="left-collocate-column">
                                    <span id="left-num-{{ ::$index}}" class="colloc-row" ng-repeat="result in sortedLists.left">
                                        <span id="left-word-{{ ::$index }}" class="colloc_link" ng-click="something(result.url)">
                                            {{ ::result.label }}
                                        </span>
                                        <span id="left-count-{{ ::$index }}">
                                            &nbsp;({{ ::result.count }})
                                        </span>
                                    </span>
                                </td>
                                <td id="right-collocate-column">
                                    <span id="right-num-{{ ::$index}}" class="colloc-row" ng-repeat="result in sortedLists.right">
                                        <span id="right-word-{{ ::$index }}" class="colloc_link" ng-click="something(result.url)">
                                            {{ ::result.label }}
                                        </span>
                                        <span id="right-count-{{ ::$index }}">
                                            &nbsp;({{ ::result.count }})
                                        </span>
                                    </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
